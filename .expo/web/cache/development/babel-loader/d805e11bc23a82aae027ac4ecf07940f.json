{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Platform } from 'expo-core';\nimport { Localization } from 'expo-localization';\n\nvar isObject = obj => obj && obj.constructor && obj.constructor === Object;\n\nclass LocaleStore {\n  constructor(locales) {\n    if (isObject(locales) === false || Object.keys(locales).length <= 1) {\n      throw new Error('Locales input must be an object and non-empty');\n    }\n\n    var copy = _objectSpread({}, locales);\n\n    var allGivenLocales = new Set(Object.keys(copy));\n    var currentLocaleName = [...allGivenLocales][0];\n    var defaultLocale = copy[currentLocaleName];\n    var defaultLocaleName = currentLocaleName;\n    var defaultLocalePhrases = new Set(Object.keys(defaultLocale));\n    var currentLocale = defaultLocale;\n\n    var setLocaleHelper = (newLocaleName, cb) => {\n      if (allGivenLocales.has(newLocaleName) === false) {\n        if (__DEV__) {\n          var s = \"\".concat(newLocaleName, \" is not a valid locale, known locales are \").concat([...allGivenLocales]);\n          console.error(s);\n        }\n      }\n\n      if (newLocaleName === currentLocaleName) {\n        if (__DEV__) {\n          console.warn('New Locale is the same as last, locale not changed');\n        }\n\n        return;\n      }\n\n      currentLocale = copy[newLocaleName];\n      currentLocaleName = newLocaleName;\n      cb && cb();\n    };\n\n    var localizationValueHelper = name => {\n      if (defaultLocalePhrases.has(name)) {\n        var result = currentLocale[name];\n\n        if (result !== undefined) {\n          return result !== undefined ? result : defaultLocale[name];\n        } else {\n          var fallback = defaultLocale[name];\n\n          if (fallback === undefined) {\n            if (__DEV__) {\n              var s = \"Fallback locale \".concat(defaultLocaleName, \" is missing a string value for \").concat(name);\n              console.error(s);\n            }\n\n            return '';\n          }\n\n          return fallback;\n        }\n      }\n    };\n\n    if (Platform.OS === 'android') {\n      var _ret = function () {\n        var localizedValues = new Set();\n\n        for (var values of Object.values(copy)) {\n          Object.keys(values).forEach(s => localizedValues.add(s));\n        }\n\n        var proxy = {};\n        Object.defineProperty(proxy, 'setLocale', {\n          get() {\n            return setLocaleHelper;\n          }\n\n        });\n        var methods = new Set(['setLocale']);\n\n        var _loop = function _loop(name) {\n          if (methods.has(name)) {\n            throw new Error(\"Cannot use \".concat(name, \" as a locale name\"));\n          }\n\n          Object.defineProperty(proxy, name, {\n            get() {\n              return localizationValueHelper(name);\n            }\n\n          });\n        };\n\n        for (var name of localizedValues.keys()) {\n          _loop(name);\n        }\n\n        return {\n          v: proxy\n        };\n      }();\n\n      if (typeof _ret === \"object\") return _ret.v;\n    } else if (Platform.OS === 'ios') {\n      var handlers = {\n        setLocale: setLocaleHelper\n      };\n      var methods = new Set(Object.keys(handlers));\n      return new Proxy(this, {\n        set() {\n          if (__DEV__) {\n            console.warn('Setting anything directly on the localization store is a no op');\n          }\n\n          return false;\n        },\n\n        get(target, name) {\n          if (typeof name !== 'string') {\n            return target[name];\n          } else {\n            if (defaultLocalePhrases.has(name)) {\n              return localizationValueHelper(name);\n            } else if (methods.has(name)) {\n              return handlers[name];\n            } else {\n              return target[name];\n            }\n          }\n        }\n\n      });\n    } else {\n      throw new Error(\"Unsupported platform at moment for localization: \".concat(Platform.OS));\n    }\n  }\n\n}\n\nfunction warnDeprecated(deprecated, replacement) {\n  console.warn(\"Expo.DangerZone.Localization.\".concat(deprecated, \" is deprecated. Use `Expo.Localization.\").concat(replacement, \"` instead.\"));\n}\n\nexport default _objectSpread(_objectSpread({}, Localization), {}, {\n  getCurrentDeviceCountryAsync() {\n    warnDeprecated('getCurrentDeviceCountryAsync()', 'country');\n    return Localization.country;\n  },\n\n  getCurrentLocaleAsync() {\n    warnDeprecated('getCurrentLocaleAsync()', 'locale');\n    return Localization.locale.replace('-', '_');\n  },\n\n  getCurrentTimeZoneAsync() {\n    warnDeprecated('getCurrentTimeZoneAsync()', 'timezone');\n    return Localization.timezone;\n  },\n\n  getPreferredLocalesAsync() {\n    warnDeprecated('getPreferredLocalesAsync()', 'locales');\n    return Localization.locales;\n  },\n\n  getISOCurrencyCodesAsync() {\n    warnDeprecated('getISOCurrencyCodesAsync()', 'isoCurrencyCodes');\n    return Localization.isoCurrencyCodes;\n  },\n\n  LocaleStore\n});","map":{"version":3,"sources":["../src/Localization.ts"],"names":[],"mappings":"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","sourcesContent":["import { Platform } from 'expo-core';\nimport { Localization } from 'expo-localization';\n\nconst isObject = obj => obj && obj.constructor && obj.constructor === Object;\n\nclass LocaleStore {\n  constructor(locales) {\n    if (isObject(locales) === false || Object.keys(locales).length <= 1) {\n      throw new Error('Locales input must be an object and non-empty');\n    }\n    const copy = { ...locales };\n    const allGivenLocales = new Set(Object.keys(copy));\n    let currentLocaleName = [...allGivenLocales][0];\n    const defaultLocale = copy[currentLocaleName];\n    const defaultLocaleName = currentLocaleName;\n    const defaultLocalePhrases = new Set(Object.keys(defaultLocale));\n    let currentLocale = defaultLocale;\n\n    const setLocaleHelper = (newLocaleName, cb) => {\n      if (allGivenLocales.has(newLocaleName) === false) {\n        if (__DEV__) {\n          const s = `${newLocaleName} is not a valid locale, known locales are ${[\n            ...allGivenLocales,\n          ]}`;\n          console.error(s);\n        }\n      }\n      if (newLocaleName === currentLocaleName) {\n        if (__DEV__) {\n          console.warn('New Locale is the same as last, locale not changed');\n        }\n        return;\n      }\n      currentLocale = copy[newLocaleName];\n      currentLocaleName = newLocaleName;\n      cb && cb();\n    };\n    const localizationValueHelper = name => {\n      if (defaultLocalePhrases.has(name)) {\n        const result = currentLocale[name];\n        if (result !== undefined) {\n          return result !== undefined ? result : defaultLocale[name];\n        } else {\n          const fallback = defaultLocale[name];\n          if (fallback === undefined) {\n            if (__DEV__) {\n              let s = `Fallback locale ${defaultLocaleName} is missing a string value for ${name}`;\n              console.error(s);\n            }\n            return '';\n          }\n          return fallback;\n        }\n      }\n    };\n\n    if (Platform.OS === 'android') {\n      let localizedValues = new Set<string>();\n      for (const values of Object.values(copy)) {\n        Object.keys(values).forEach(s => localizedValues.add(s));\n      }\n      const proxy = {};\n      Object.defineProperty(proxy, 'setLocale', {\n        get() {\n          return setLocaleHelper;\n        },\n      });\n\n      const methods = new Set(['setLocale']);\n      for (const name of localizedValues.keys()) {\n        if (methods.has(name)) {\n          throw new Error(`Cannot use ${name} as a locale name`);\n        }\n        Object.defineProperty(proxy, name, {\n          get() {\n            return localizationValueHelper(name);\n          },\n        });\n      }\n      return proxy;\n    } else if (Platform.OS === 'ios') {\n      const handlers = { setLocale: setLocaleHelper };\n      const methods = new Set(Object.keys(handlers));\n      return new Proxy(this, {\n        set() {\n          if (__DEV__) {\n            console.warn('Setting anything directly on the localization store is a no op');\n          }\n          return false;\n        },\n        get(target, name) {\n          if (typeof name !== 'string') {\n            return target[name];\n          } else {\n            if (defaultLocalePhrases.has(name)) {\n              return localizationValueHelper(name);\n            } else if (methods.has(name)) {\n              return handlers[name];\n            } else {\n              return target[name];\n            }\n          }\n        },\n      });\n    } else {\n      throw new Error(`Unsupported platform at moment for localization: ${Platform.OS}`);\n    }\n  }\n}\n\nfunction warnDeprecated(deprecated, replacement) {\n  console.warn(\n    `Expo.DangerZone.Localization.${deprecated} is deprecated. Use \\`Expo.Localization.${replacement}\\` instead.`\n  );\n}\n\nexport default {\n  ...Localization,\n  getCurrentDeviceCountryAsync() {\n    warnDeprecated('getCurrentDeviceCountryAsync()', 'country');\n    return Localization.country;\n  },\n  getCurrentLocaleAsync() {\n    warnDeprecated('getCurrentLocaleAsync()', 'locale');\n    return Localization.locale.replace('-', '_');\n  },\n  getCurrentTimeZoneAsync() {\n    warnDeprecated('getCurrentTimeZoneAsync()', 'timezone');\n    return Localization.timezone;\n  },\n  getPreferredLocalesAsync() {\n    warnDeprecated('getPreferredLocalesAsync()', 'locales');\n    return Localization.locales;\n  },\n  getISOCurrencyCodesAsync() {\n    warnDeprecated('getISOCurrencyCodesAsync()', 'isoCurrencyCodes');\n    return Localization.isoCurrencyCodes;\n  },\n  LocaleStore,\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}