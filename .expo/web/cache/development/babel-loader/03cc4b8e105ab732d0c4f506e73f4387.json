{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jshukurov\\\\Desktop\\\\Poppi Over The Edge\\\\Poppi-Over-the-Edge-master\\\\node_modules\\\\expo-pixi\\\\lib\\\\components\\\\Signature.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React from 'react';\nimport { GLView } from 'expo-gl';\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport { vec2 } from 'gl-matrix';\nimport PIXI from \"../Pixi\";\nimport { takeSnapshotAsync } from \"../utils\";\nimport { BezierPath, BezierProvider } from \"../core/signature\";\nglobal.__ExpoSignatureId = global.__ExpoSignatureId || 0;\nvar scale = PixelRatio.get();\n\nfunction scaled(nativeEvent) {\n  var out = vec2.fromValues(nativeEvent.locationX, nativeEvent.locationY);\n  vec2.scale(out, out, scale);\n  return out;\n}\n\nexport default class Signature extends React.Component {\n  constructor(props, _context) {\n    var _this;\n\n    super(props, _context);\n    _this = this;\n\n    this._setupPanResponder = () => {\n      var onEnd = nativeEvent => {\n        this.provider.addPointToSignature(scaled(nativeEvent), true);\n        this.provider.reset();\n        setTimeout(() => this.props.onChange && this.props.onChange(this.renderer), 1);\n      };\n\n      this.panResponder = PanResponder.create({\n        onStartShouldSetResponder: () => true,\n        onStartShouldSetPanResponderCapture: () => true,\n        onMoveShouldSetPanResponder: (evt, gestureState) => true,\n        onPanResponderGrant: (_ref) => {\n          var {\n            nativeEvent\n          } = _ref;\n\n          this._beginNewLine();\n\n          this.provider.reset();\n          this.provider.addPointToSignature(scaled(nativeEvent));\n        },\n        onPanResponderMove: (_ref2) => {\n          var {\n            nativeEvent\n          } = _ref2;\n          this.provider.addPointToSignature(scaled(nativeEvent));\n        },\n        onPanResponderRelease: (_ref3) => {\n          var {\n            nativeEvent\n          } = _ref3;\n          return onEnd(nativeEvent);\n        },\n        onPanResponderTerminate: (_ref4) => {\n          var {\n            nativeEvent\n          } = _ref4;\n          return onEnd(nativeEvent);\n        }\n      });\n    };\n\n    this._beginNewLine = () => {\n      this.graphics = new PIXI.Graphics();\n      this.stage.addChild(this.graphics);\n    };\n\n    this._drawPath = (type, points, finalized) => {\n      this.graphicsTmp.clear();\n      var graphics = finalized ? this.graphics : this.graphicsTmp;\n      graphics.beginFill(this.props.strokeColor);\n      graphics.lineStyle(1, this.props.strokeColor, this.props.strokeAlpha);\n      BezierPath[type](points, graphics);\n      graphics.endFill();\n\n      this.renderer._update();\n    };\n\n    this.shouldComponentUpdate = () => false;\n\n    this.undo = () => {\n      if (!this.renderer) {\n        return null;\n      }\n\n      var {\n        children\n      } = this.stage;\n\n      if (children.length > 0) {\n        var child = children[children.length - 1];\n        this.stage.removeChild(child);\n\n        this.renderer._update();\n\n        setTimeout(() => this.props.onChange && this.props.onChange(this.renderer), 2);\n        return child;\n      }\n    };\n\n    this.clear = () => {\n      this.provider.reset();\n\n      if (!this.renderer) {\n        return null;\n      }\n\n      if (this.stage.children.length > 0) {\n        this.stage.removeChildren();\n\n        this.renderer._update();\n      }\n\n      return null;\n    };\n\n    this.takeSnapshotAsync = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return takeSnapshotAsync(_this.glView, ...args);\n    };\n\n    this.onContextCreate = function () {\n      var _ref5 = _asyncToGenerator(function* (context) {\n        _this.context = context;\n        _this.graphicsTmp = new PIXI.Graphics();\n        _this.stage = new PIXI.Container();\n\n        _this.stage.addChild(_this.graphicsTmp);\n\n        var getAttributes = context.getContextAttributes || (() => ({}));\n\n        context.getContextAttributes = () => {\n          var contextAttributes = getAttributes();\n          return _objectSpread({}, contextAttributes, {\n            stencil: true\n          });\n        };\n\n        _this.renderer = PIXI.autoDetectRenderer(context.drawingBufferWidth, context.drawingBufferHeight, {\n          context,\n          antialias: true,\n          backgroundColor: 0xffffff,\n          transparent: false,\n          autoStart: false\n        });\n\n        _this.renderer._update = () => {\n          _this.renderer.render(_this.stage);\n\n          context.endFrameEXP();\n        };\n\n        _this.props.onReady && _this.props.onReady(context);\n      });\n\n      return function (_x) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    this.onLayout = (_ref6) => {\n      var {\n        nativeEvent: {\n          layout: {\n            width,\n            height\n          }\n        }\n      } = _ref6;\n\n      if (this.renderer) {\n        var _scale = PixelRatio.get();\n\n        this.renderer.resize(width * _scale, height * _scale);\n\n        this.renderer._update();\n      }\n    };\n\n    this.setRef = ref => {\n      this.glView = ref;\n    };\n\n    this.provider = new BezierProvider();\n\n    this._setupPanResponder();\n  }\n\n  componentWillMount() {\n    global.__ExpoSignatureId++;\n  }\n\n  componentDidMount() {\n    this._drawSub = this.provider.addListener(BezierProvider.EVENT_DRAW_PATH, this._drawPath);\n  }\n\n  componentWillUnmount() {\n    this._drawSub.remove();\n  }\n\n  render() {\n    return React.createElement(GLView, _extends({}, this.panResponder.panHandlers, {\n      onLayout: this.onLayout,\n      key: 'Expo.Signature-' + global.__ExpoSignatureId,\n      ref: this.setRef\n    }, this.props, {\n      onContextCreate: this.onContextCreate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/jshukurov/Desktop/Poppi Over The Edge/Poppi-Over-the-Edge-master/node_modules/expo-pixi/lib/components/Signature.js"],"names":["React","GLView","vec2","PIXI","takeSnapshotAsync","BezierPath","BezierProvider","global","__ExpoSignatureId","scale","PixelRatio","get","scaled","nativeEvent","out","fromValues","locationX","locationY","Signature","Component","constructor","props","context","_setupPanResponder","onEnd","provider","addPointToSignature","reset","setTimeout","onChange","renderer","panResponder","PanResponder","create","onStartShouldSetResponder","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","evt","gestureState","onPanResponderGrant","_beginNewLine","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","graphics","Graphics","stage","addChild","_drawPath","type","points","finalized","graphicsTmp","clear","beginFill","strokeColor","lineStyle","strokeAlpha","endFill","_update","shouldComponentUpdate","undo","children","length","child","removeChild","removeChildren","args","glView","onContextCreate","Container","getAttributes","getContextAttributes","contextAttributes","stencil","autoDetectRenderer","drawingBufferWidth","drawingBufferHeight","antialias","backgroundColor","transparent","autoStart","render","endFrameEXP","onReady","onLayout","layout","width","height","resize","setRef","ref","componentWillMount","componentDidMount","_drawSub","addListener","EVENT_DRAW_PATH","componentWillUnmount","remove","panHandlers"],"mappings":"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","sourcesContent":["//@flow\nimport React from 'react';\nimport { GLView } from 'expo-gl';\nimport { PanResponder, PixelRatio } from 'react-native';\nimport { vec2 } from 'gl-matrix';\n\nimport PIXI from '../Pixi';\nimport { takeSnapshotAsync } from '../utils';\nimport { BezierPath, BezierProvider } from '../core/signature';\n\nglobal.__ExpoSignatureId = global.__ExpoSignatureId || 0;\n\ntype Props = {\n  strokeColor: number | string,\n  strokeAlpha: number,\n  onChange: () => PIXI.Renderer,\n  onReady: () => WebGLRenderingContext,\n};\n\nconst scale = PixelRatio.get();\n\nfunction scaled(nativeEvent) {\n  const out = vec2.fromValues(nativeEvent.locationX, nativeEvent.locationY);\n  vec2.scale(out, out, scale);\n  return out;\n}\n\nexport default class Signature extends React.Component<Props> {\n  stage: PIXI.Stage;\n\n  graphics;\n  graphicsTmp;\n\n  panResponder: PanResponder;\n  renderer: PIXI.Renderer;\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.provider = new BezierProvider();\n    this._setupPanResponder();\n  }\n\n  componentWillMount() {\n    global.__ExpoSignatureId++;\n  }\n\n  componentDidMount() {\n    this._drawSub = this.provider.addListener(BezierProvider.EVENT_DRAW_PATH, this._drawPath);\n  }\n\n  componentWillUnmount() {\n    this._drawSub.remove();\n  }\n\n  _setupPanResponder = () => {\n    const onEnd = nativeEvent => {\n      this.provider.addPointToSignature(scaled(nativeEvent), true);\n      this.provider.reset();\n\n      setTimeout(() => this.props.onChange && this.props.onChange(this.renderer), 1);\n    };\n\n    this.panResponder = PanResponder.create({\n      onStartShouldSetResponder: () => true,\n      onStartShouldSetPanResponderCapture: () => true,\n      onMoveShouldSetPanResponder: (evt, gestureState) => true,\n      onPanResponderGrant: ({ nativeEvent }) => {\n        this._beginNewLine();\n        this.provider.reset();\n        this.provider.addPointToSignature(scaled(nativeEvent));\n      },\n      onPanResponderMove: ({ nativeEvent }) => {\n        this.provider.addPointToSignature(scaled(nativeEvent));\n      },\n      onPanResponderRelease: ({ nativeEvent }) => onEnd(nativeEvent),\n      onPanResponderTerminate: ({ nativeEvent }) => onEnd(nativeEvent),\n    });\n  };\n\n  _beginNewLine = () => {\n    this.graphics = new PIXI.Graphics();\n    this.stage.addChild(this.graphics);\n  };\n\n  _drawPath = (type, points, finalized) => {\n    this.graphicsTmp.clear();\n    const graphics = finalized ? this.graphics : this.graphicsTmp;\n    graphics.beginFill(this.props.strokeColor);\n    graphics.lineStyle(1, this.props.strokeColor, this.props.strokeAlpha);\n\n    BezierPath[type](points, graphics);\n\n    graphics.endFill();\n    this.renderer._update();\n  };\n\n  shouldComponentUpdate = () => false;\n\n  undo = () => {\n    if (!this.renderer) {\n      return null;\n    }\n\n    const { children } = this.stage;\n    if (children.length > 0) {\n      const child = children[children.length - 1];\n      this.stage.removeChild(child);\n      this.renderer._update();\n      // TODO: This doesn't really work :/\n      setTimeout(() => this.props.onChange && this.props.onChange(this.renderer), 2);\n      return child;\n    }\n  };\n\n  clear = () => {\n    this.provider.reset();\n    if (!this.renderer) {\n      return null;\n    }\n\n    if (this.stage.children.length > 0) {\n      this.stage.removeChildren();\n      this.renderer._update();\n    }\n\n    return null;\n  };\n\n  takeSnapshotAsync = (...args) => {\n    return takeSnapshotAsync(this.glView, ...args);\n  };\n\n  onContextCreate = async (context: WebGLRenderingContext) => {\n    this.context = context;\n    this.graphicsTmp = new PIXI.Graphics();\n\n    this.stage = new PIXI.Container();\n    this.stage.addChild(this.graphicsTmp);\n\n    const getAttributes = context.getContextAttributes || (() => ({}));\n    context.getContextAttributes = () => {\n      const contextAttributes = getAttributes();\n      return {\n        ...contextAttributes,\n        stencil: true,\n      };\n    };\n\n    this.renderer = PIXI.autoDetectRenderer(\n      context.drawingBufferWidth,\n      context.drawingBufferHeight,\n      {\n        context,\n        antialias: true,\n        backgroundColor: 0xffffff,\n        transparent: false,\n        autoStart: false,\n      }\n    );\n    this.renderer._update = () => {\n      this.renderer.render(this.stage);\n      context.endFrameEXP();\n    };\n    this.props.onReady && this.props.onReady(context);\n  };\n\n  onLayout = ({\n    nativeEvent: {\n      layout: { width, height },\n    },\n  }) => {\n    if (this.renderer) {\n      const scale = PixelRatio.get();\n      this.renderer.resize(width * scale, height * scale);\n      this.renderer._update();\n    }\n  };\n\n  setRef = ref => {\n    this.glView = ref;\n  };\n\n  render() {\n    return (\n      <GLView\n        {...this.panResponder.panHandlers}\n        onLayout={this.onLayout}\n        key={'Expo.Signature-' + global.__ExpoSignatureId}\n        ref={this.setRef}\n        {...this.props}\n        onContextCreate={this.onContextCreate}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}