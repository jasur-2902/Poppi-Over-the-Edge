{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jshukurov\\\\Desktop\\\\Poppi Over The Edge\\\\Poppi-Over-the-Edge-master\\\\node_modules\\\\expo-av\\\\build\\\\Video.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport omit from 'lodash/omit';\nimport nullthrows from 'nullthrows';\nimport PropTypes from 'prop-types';\nimport * as React from 'react';\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ViewPropTypes from \"react-native-web/dist/exports/ViewPropTypes\";\nimport { assertStatusValuesInBounds, getNativeSourceAndFullInitialStatusForLoadAsync, getNativeSourceFromSource, getUnloadedStatus, PlaybackMixin } from \"./AV\";\nimport ExponentAV from \"./ExponentAV\";\nimport ExponentVideo from \"./ExponentVideo\";\nimport ExpoVideoManager from \"./ExpoVideoManager\";\nimport { ResizeMode } from \"./Video.types\";\nexport { ResizeMode };\nexport var FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = 0;\nexport var FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = 1;\nexport var FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = 2;\nexport var FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = 3;\nexport var IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\nexport var IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\nexport var IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\nexport var IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\n\nvar _STYLES = StyleSheet.create({\n  base: {\n    overflow: 'hidden'\n  },\n  poster: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    resizeMode: 'contain'\n  },\n  video: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  }\n});\n\nvar ExpoVideoManagerConstants = ExpoVideoManager;\nvar ExpoVideoViewManager = ExpoVideoManager;\nexport default class Video extends React.Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n    this._nativeRef = React.createRef();\n\n    this._handleNewStatus = status => {\n      if (this.state.showPoster && status.isLoaded && (status.isPlaying || status.positionMillis !== 0)) {\n        this.setState({\n          showPoster: false\n        });\n      }\n\n      if (this.props.onPlaybackStatusUpdate) {\n        this.props.onPlaybackStatusUpdate(status);\n      }\n    };\n\n    this._performOperationAndHandleStatusAsync = function () {\n      var _ref = _asyncToGenerator(function* (operation) {\n        var video = _this._nativeRef.current;\n\n        if (!video) {\n          throw new Error(\"Cannot complete operation because the Video component has not yet loaded\");\n        }\n\n        var handle = findNodeHandle(_this._nativeRef.current);\n        var status = yield operation(handle);\n\n        _this._handleNewStatus(status);\n\n        return status;\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this._setFullscreen = function () {\n      var _ref2 = _asyncToGenerator(function* (value) {\n        return _this._performOperationAndHandleStatusAsync(tag => ExpoVideoViewManager.setFullscreen(tag, value));\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    this.presentFullscreenPlayer = _asyncToGenerator(function* () {\n      return _this._setFullscreen(true);\n    });\n\n    this.presentIOSFullscreenPlayer = () => {\n      console.warn(\"You're using `presentIOSFullscreenPlayer`. Please migrate your code to use `presentFullscreenPlayer` instead.\");\n      return this.presentFullscreenPlayer();\n    };\n\n    this.presentFullscreenPlayerAsync = _asyncToGenerator(function* () {\n      return yield _this.presentFullscreenPlayer();\n    });\n    this.dismissFullscreenPlayer = _asyncToGenerator(function* () {\n      return _this._setFullscreen(false);\n    });\n\n    this.dismissIOSFullscreenPlayer = () => {\n      console.warn(\"You're using `dismissIOSFullscreenPlayer`. Please migrate your code to use `dismissFullscreenPlayer` instead.\");\n      this.dismissFullscreenPlayer();\n    };\n\n    this.getStatusAsync = _asyncToGenerator(function* () {\n      return _this._performOperationAndHandleStatusAsync(tag => ExponentAV.getStatusForVideo(tag));\n    });\n\n    this.loadAsync = function () {\n      var _ref7 = _asyncToGenerator(function* (source) {\n        var initialStatus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var downloadFirst = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var {\n          nativeSource,\n          fullInitialStatus\n        } = yield getNativeSourceAndFullInitialStatusForLoadAsync(source, initialStatus, downloadFirst);\n        return _this._performOperationAndHandleStatusAsync(tag => ExponentAV.loadForVideo(tag, nativeSource, fullInitialStatus));\n      });\n\n      return function (_x3) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    this.unloadAsync = _asyncToGenerator(function* () {\n      return _this._performOperationAndHandleStatusAsync(tag => ExponentAV.unloadForVideo(tag));\n    });\n\n    this.setStatusAsync = function () {\n      var _ref9 = _asyncToGenerator(function* (status) {\n        assertStatusValuesInBounds(status);\n        return _this._performOperationAndHandleStatusAsync(tag => ExponentAV.setStatusForVideo(tag, status));\n      });\n\n      return function (_x4) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n\n    this.replayAsync = _asyncToGenerator(function* () {\n      var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (status.positionMillis && status.positionMillis !== 0) {\n        throw new Error('Requested position after replay has to be 0.');\n      }\n\n      return _this._performOperationAndHandleStatusAsync(tag => ExponentAV.replayVideo(tag, _objectSpread({}, status, {\n        positionMillis: 0,\n        shouldPlay: true\n      })));\n    });\n\n    this._nativeOnPlaybackStatusUpdate = event => {\n      this._handleNewStatus(event.nativeEvent);\n    };\n\n    this._nativeOnLoadStart = () => {\n      if (this.props.onLoadStart) {\n        this.props.onLoadStart();\n      }\n    };\n\n    this._nativeOnLoad = event => {\n      if (this.props.onLoad) {\n        this.props.onLoad(event.nativeEvent);\n      }\n\n      this._handleNewStatus(event.nativeEvent);\n    };\n\n    this._nativeOnError = event => {\n      var error = event.nativeEvent.error;\n\n      if (this.props.onError) {\n        this.props.onError(error);\n      }\n\n      this._handleNewStatus(getUnloadedStatus(error));\n    };\n\n    this._nativeOnReadyForDisplay = event => {\n      if (this.props.onReadyForDisplay) {\n        this.props.onReadyForDisplay(event.nativeEvent);\n      }\n    };\n\n    this._nativeOnFullscreenUpdate = event => {\n      if (this.props.onIOSFullscreenUpdate && this.props.onFullscreenUpdate) {\n        console.warn(\"You've supplied both `onIOSFullscreenUpdate` and `onFullscreenUpdate`. You're going to receive updates on both the callbacks.\");\n      } else if (this.props.onIOSFullscreenUpdate) {\n        console.warn(\"You're using `onIOSFullscreenUpdate`. Please migrate your code to use `onFullscreenUpdate` instead.\");\n      }\n\n      if (this.props.onIOSFullscreenUpdate) {\n        this.props.onIOSFullscreenUpdate(event.nativeEvent);\n      }\n\n      if (this.props.onFullscreenUpdate) {\n        this.props.onFullscreenUpdate(event.nativeEvent);\n      }\n    };\n\n    this._renderPoster = () => this.props.usePoster && this.state.showPoster ? React.createElement(Image, {\n      style: [_STYLES.poster, this.props.posterStyle],\n      source: this.props.posterSource,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }) : null;\n\n    this.state = {\n      showPoster: !!props.usePoster\n    };\n  }\n\n  setNativeProps(nativeProps) {\n    var nativeVideo = nullthrows(this._nativeRef.current);\n    nativeVideo.setNativeProps(nativeProps);\n  }\n\n  render() {\n    var source = getNativeSourceFromSource(this.props.source) || undefined;\n    var nativeResizeMode = ExpoVideoManagerConstants.ScaleNone;\n\n    if (this.props.resizeMode) {\n      var resizeMode = this.props.resizeMode;\n\n      if (resizeMode === ResizeMode.STRETCH) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleToFill;\n      } else if (resizeMode === ResizeMode.CONTAIN) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleAspectFit;\n      } else if (resizeMode === ResizeMode.COVER) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleAspectFill;\n      }\n    }\n\n    var status = _objectSpread({}, this.props.status);\n\n    ['progressUpdateIntervalMillis', 'positionMillis', 'shouldPlay', 'rate', 'shouldCorrectPitch', 'volume', 'isMuted', 'isLooping'].forEach(prop => {\n      if (prop in this.props) {\n        status[prop] = this.props[prop];\n      }\n    });\n\n    var nativeProps = _objectSpread({}, omit(this.props, 'source', 'onPlaybackStatusUpdate', 'usePoster', 'posterSource', ...Object.keys(status)), {\n      style: StyleSheet.flatten([_STYLES.base, this.props.style]),\n      source,\n      resizeMode: nativeResizeMode,\n      status,\n      onStatusUpdate: this._nativeOnPlaybackStatusUpdate,\n      onLoadStart: this._nativeOnLoadStart,\n      onLoad: this._nativeOnLoad,\n      onError: this._nativeOnError,\n      onReadyForDisplay: this._nativeOnReadyForDisplay,\n      onFullscreenUpdate: this._nativeOnFullscreenUpdate\n    });\n\n    return React.createElement(View, {\n      style: nativeProps.style,\n      pointerEvents: \"box-none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, React.createElement(ExponentVideo, _extends({\n      ref: this._nativeRef\n    }, nativeProps, {\n      style: _STYLES.video,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    })), this._renderPoster());\n  }\n\n}\nVideo.RESIZE_MODE_CONTAIN = ResizeMode.CONTAIN;\nVideo.RESIZE_MODE_COVER = ResizeMode.COVER;\nVideo.RESIZE_MODE_STRETCH = ResizeMode.STRETCH;\nVideo.IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\nVideo.IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\nVideo.IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\nVideo.IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\nVideo.FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\nVideo.FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\nVideo.FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\nVideo.FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\nVideo.propTypes = _objectSpread({\n  source: PropTypes.oneOfType([PropTypes.shape({\n    uri: PropTypes.string,\n    overrideFileExtensionAndroid: PropTypes.string\n  }), PropTypes.number]),\n  posterSource: PropTypes.oneOfType([PropTypes.shape({\n    uri: PropTypes.string\n  }), PropTypes.number]),\n  posterStyle: ViewPropTypes.style,\n  onPlaybackStatusUpdate: PropTypes.func,\n  onLoadStart: PropTypes.func,\n  onLoad: PropTypes.func,\n  onError: PropTypes.func,\n  onIOSFullscreenUpdate: PropTypes.func,\n  onFullscreenUpdate: PropTypes.func,\n  onReadyForDisplay: PropTypes.func,\n  useNativeControls: PropTypes.bool,\n  resizeMode: PropTypes.string,\n  usePoster: PropTypes.bool,\n  status: PropTypes.shape({\n    progressUpdateIntervalMillis: PropTypes.number,\n    positionMillis: PropTypes.number,\n    shouldPlay: PropTypes.bool,\n    rate: PropTypes.number,\n    shouldCorrectPitch: PropTypes.bool,\n    volume: PropTypes.number,\n    isMuted: PropTypes.bool,\n    isLooping: PropTypes.bool\n  }),\n  progressUpdateIntervalMillis: PropTypes.number,\n  positionMillis: PropTypes.number,\n  shouldPlay: PropTypes.bool,\n  rate: PropTypes.number,\n  shouldCorrectPitch: PropTypes.bool,\n  volume: PropTypes.number,\n  isMuted: PropTypes.bool,\n  isLooping: PropTypes.bool,\n  scaleX: PropTypes.number,\n  scaleY: PropTypes.number,\n  translateX: PropTypes.number,\n  translateY: PropTypes.number,\n  rotation: PropTypes.number\n}, ViewPropTypes);\n\n_extends(Video.prototype, PlaybackMixin);","map":{"version":3,"sources":["../src/Video.tsx"],"names":[],"mappings":"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","sourcesContent":["import omit from 'lodash/omit';\nimport nullthrows from 'nullthrows';\nimport PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { findNodeHandle, Image, NativeComponent, StyleSheet, View, ViewPropTypes } from 'react-native';\n\nimport {\n  assertStatusValuesInBounds,\n  getNativeSourceAndFullInitialStatusForLoadAsync,\n  getNativeSourceFromSource,\n  getUnloadedStatus,\n  Playback,\n  PlaybackMixin,\n  PlaybackSource,\n  PlaybackStatus,\n  PlaybackStatusToSet,\n} from './AV';\nimport ExponentAV from './ExponentAV';\nimport ExponentVideo from './ExponentVideo';\nimport ExpoVideoManager from './ExpoVideoManager';\nimport {\n  ExponentVideoComponent,\n  FullscreenUpdateEvent,\n  NativeProps,\n  NaturalSize,\n  VideoProps,\n  ReadyForDisplayEvent,\n  ResizeMode,\n  VideoState,\n} from './Video.types';\n\nexport {\n  ExponentVideoComponent,\n  FullscreenUpdateEvent,\n  NativeProps,\n  NaturalSize,\n  VideoProps,\n  ReadyForDisplayEvent,\n  ResizeMode,\n  VideoState,\n}\n\nexport const FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = 0;\nexport const FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = 1;\nexport const FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = 2;\nexport const FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = 3;\n\nexport const IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\nexport const IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\nexport const IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\nexport const IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\n\nconst _STYLES = StyleSheet.create({\n  base: {\n    overflow: 'hidden',\n  },\n  poster: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    resizeMode: 'contain',\n  },\n  video: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n\n// On a real device UIManager should be present, however when running offline tests with jest-expo\n// we have to use the provided native module mock to access constants\nconst ExpoVideoManagerConstants = ExpoVideoManager;\nconst ExpoVideoViewManager = ExpoVideoManager;\n\nexport default class Video extends React.Component<VideoProps, VideoState> implements Playback {\n  static RESIZE_MODE_CONTAIN = ResizeMode.CONTAIN;\n  static RESIZE_MODE_COVER = ResizeMode.COVER;\n  static RESIZE_MODE_STRETCH = ResizeMode.STRETCH;\n\n  static IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = IOS_FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\n  static IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = IOS_FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\n  static IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = IOS_FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\n  static IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = IOS_FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\n\n  static FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT = FULLSCREEN_UPDATE_PLAYER_WILL_PRESENT;\n  static FULLSCREEN_UPDATE_PLAYER_DID_PRESENT = FULLSCREEN_UPDATE_PLAYER_DID_PRESENT;\n  static FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS = FULLSCREEN_UPDATE_PLAYER_WILL_DISMISS;\n  static FULLSCREEN_UPDATE_PLAYER_DID_DISMISS = FULLSCREEN_UPDATE_PLAYER_DID_DISMISS;\n\n  static propTypes = {\n    // Source stuff\n    source: PropTypes.oneOfType([\n      PropTypes.shape({\n        uri: PropTypes.string,\n        overrideFileExtensionAndroid: PropTypes.string,\n      }), // remote URI like { uri: 'http://foo/bar.mp4' }\n      PropTypes.number, // asset module like require('./foo/bar.mp4')\n    ]),\n    posterSource: PropTypes.oneOfType([\n      PropTypes.shape({\n        uri: PropTypes.string,\n      }), // remote URI like { uri: 'http://foo/bar.mp4' }\n      PropTypes.number, // asset module like require('./foo/bar.mp4')\n    ]),\n    posterStyle: ViewPropTypes.style,\n\n    // Callbacks\n    onPlaybackStatusUpdate: PropTypes.func,\n    onLoadStart: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    onIOSFullscreenUpdate: PropTypes.func,\n    onFullscreenUpdate: PropTypes.func,\n    onReadyForDisplay: PropTypes.func,\n\n    // UI stuff\n    useNativeControls: PropTypes.bool,\n    resizeMode: PropTypes.string,\n    usePoster: PropTypes.bool,\n\n    // Playback API\n    status: PropTypes.shape({\n      progressUpdateIntervalMillis: PropTypes.number,\n      positionMillis: PropTypes.number,\n      shouldPlay: PropTypes.bool,\n      rate: PropTypes.number,\n      shouldCorrectPitch: PropTypes.bool,\n      volume: PropTypes.number,\n      isMuted: PropTypes.bool,\n      isLooping: PropTypes.bool,\n    }),\n    progressUpdateIntervalMillis: PropTypes.number,\n    positionMillis: PropTypes.number,\n    shouldPlay: PropTypes.bool,\n    rate: PropTypes.number,\n    shouldCorrectPitch: PropTypes.bool,\n    volume: PropTypes.number,\n    isMuted: PropTypes.bool,\n    isLooping: PropTypes.bool,\n\n    // Required by react-native\n    scaleX: PropTypes.number,\n    scaleY: PropTypes.number,\n    translateX: PropTypes.number,\n    translateY: PropTypes.number,\n    rotation: PropTypes.number,\n    ...ViewPropTypes,\n  };\n\n  _nativeRef = React.createRef<InstanceType<ExponentVideoComponent> & NativeComponent>();\n\n  // componentOrHandle: null | number | React.Component<any, any> | React.ComponentClass<any>\n\n  constructor(props: VideoProps) {\n    super(props);\n    this.state = {\n      showPoster: !!props.usePoster,\n    };\n  }\n\n  setNativeProps(nativeProps: NativeProps) {\n    const nativeVideo = nullthrows(this._nativeRef.current);\n    nativeVideo.setNativeProps(nativeProps);\n  }\n\n  // Internal methods\n\n  _handleNewStatus = (status: PlaybackStatus) => {\n    if (\n      this.state.showPoster &&\n      status.isLoaded &&\n      (status.isPlaying || status.positionMillis !== 0)\n    ) {\n      this.setState({ showPoster: false });\n    }\n\n    if (this.props.onPlaybackStatusUpdate) {\n      this.props.onPlaybackStatusUpdate(status);\n    }\n  };\n\n  _performOperationAndHandleStatusAsync = async (\n    operation: (tag: number) => Promise<PlaybackStatus>\n  ): Promise<PlaybackStatus> => {\n    const video = this._nativeRef.current;\n    if (!video) {\n      throw new Error(`Cannot complete operation because the Video component has not yet loaded`);\n    }\n\n    const handle = findNodeHandle(this._nativeRef.current)!;\n    const status: PlaybackStatus = await operation(handle);\n    this._handleNewStatus(status);\n    return status;\n  };\n\n  // ### iOS Fullscreening API ###\n\n  _setFullscreen = async (value: boolean) => {\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExpoVideoViewManager.setFullscreen(tag, value)\n    );\n  };\n\n  presentFullscreenPlayer = async () => {\n    return this._setFullscreen(true);\n  };\n\n  presentIOSFullscreenPlayer = () => {\n    console.warn(\n      \"You're using `presentIOSFullscreenPlayer`. Please migrate your code to use `presentFullscreenPlayer` instead.\"\n    );\n    return this.presentFullscreenPlayer();\n  };\n\n  presentFullscreenPlayerAsync = async () => {\n    return await this.presentFullscreenPlayer();\n  };\n\n  dismissFullscreenPlayer = async () => {\n    return this._setFullscreen(false);\n  };\n\n  dismissIOSFullscreenPlayer = () => {\n    console.warn(\n      \"You're using `dismissIOSFullscreenPlayer`. Please migrate your code to use `dismissFullscreenPlayer` instead.\"\n    );\n    this.dismissFullscreenPlayer();\n  };\n\n  // ### Unified playback API ### (consistent with Audio.js)\n  // All calls automatically call onPlaybackStatusUpdate as a side effect.\n\n  // Get status API\n\n  getStatusAsync = async (): Promise<PlaybackStatus> => {\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExponentAV.getStatusForVideo(tag)\n    );\n  };\n\n  // Loading / unloading API\n\n  loadAsync = async (\n    source: PlaybackSource,\n    initialStatus: PlaybackStatusToSet = {},\n    downloadFirst: boolean = true\n  ): Promise<PlaybackStatus> => {\n    const {\n      nativeSource,\n      fullInitialStatus,\n    } = await getNativeSourceAndFullInitialStatusForLoadAsync(source, initialStatus, downloadFirst);\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExponentAV.loadForVideo(tag, nativeSource, fullInitialStatus)\n    );\n  };\n\n  // Equivalent to setting URI to null.\n  unloadAsync = async (): Promise<PlaybackStatus> => {\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExponentAV.unloadForVideo(tag)\n    );\n  };\n\n  // Set status API (only available while isLoaded = true)\n\n  setStatusAsync = async (status: PlaybackStatusToSet): Promise<PlaybackStatus> => {\n    assertStatusValuesInBounds(status);\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExponentAV.setStatusForVideo(tag, status)\n    );\n  };\n\n  replayAsync = async (status: PlaybackStatusToSet = {}): Promise<PlaybackStatus> => {\n    if (status.positionMillis && status.positionMillis !== 0) {\n      throw new Error('Requested position after replay has to be 0.');\n    }\n\n    return this._performOperationAndHandleStatusAsync((tag: number) =>\n      ExponentAV.replayVideo(tag, {\n        ...status,\n        positionMillis: 0,\n        shouldPlay: true,\n      })\n    );\n  };\n\n  // Methods of the Playback interface that are set via PlaybackMixin\n  playAsync!: () => Promise<PlaybackStatus>;\n  playFromPositionAsync!: (\n    positionMillis: number,\n    tolerances?: { toleranceMillisBefore?: number; toleranceMillisAfter?: number }\n  ) => Promise<PlaybackStatus>;\n  pauseAsync!: () => Promise<PlaybackStatus>;\n  stopAsync!: () => Promise<PlaybackStatus>;\n  setPositionAsync!: (\n    positionMillis: number,\n    tolerances?: { toleranceMillisBefore?: number; toleranceMillisAfter?: number }\n  ) => Promise<PlaybackStatus>;\n  setRateAsync!: (rate: number, shouldCorrectPitch: boolean) => Promise<PlaybackStatus>;\n  setVolumeAsync!: (volume: number) => Promise<PlaybackStatus>;\n  setIsMutedAsync!: (isMuted: boolean) => Promise<PlaybackStatus>;\n  setIsLoopingAsync!: (isLooping: boolean) => Promise<PlaybackStatus>;\n  setProgressUpdateIntervalAsync!: (\n    progressUpdateIntervalMillis: number\n  ) => Promise<PlaybackStatus>;\n\n  // ### Callback wrappers ###\n\n  _nativeOnPlaybackStatusUpdate = (event: { nativeEvent: PlaybackStatus }) => {\n    this._handleNewStatus(event.nativeEvent);\n  };\n\n  // TODO make sure we are passing the right stuff\n  _nativeOnLoadStart = () => {\n    if (this.props.onLoadStart) {\n      this.props.onLoadStart();\n    }\n  };\n\n  _nativeOnLoad = (event: { nativeEvent: PlaybackStatus }) => {\n    if (this.props.onLoad) {\n      this.props.onLoad(event.nativeEvent);\n    }\n    this._handleNewStatus(event.nativeEvent);\n  };\n\n  _nativeOnError = (event: { nativeEvent: { error: string } }) => {\n    const error: string = event.nativeEvent.error;\n    if (this.props.onError) {\n      this.props.onError(error);\n    }\n    this._handleNewStatus(getUnloadedStatus(error));\n  };\n\n  _nativeOnReadyForDisplay = (event: { nativeEvent: ReadyForDisplayEvent }) => {\n    if (this.props.onReadyForDisplay) {\n      this.props.onReadyForDisplay(event.nativeEvent);\n    }\n  };\n\n  _nativeOnFullscreenUpdate = (event: { nativeEvent: FullscreenUpdateEvent }) => {\n    if (this.props.onIOSFullscreenUpdate && this.props.onFullscreenUpdate) {\n      console.warn(\n        \"You've supplied both `onIOSFullscreenUpdate` and `onFullscreenUpdate`. You're going to receive updates on both the callbacks.\"\n      );\n    } else if (this.props.onIOSFullscreenUpdate) {\n      console.warn(\n        \"You're using `onIOSFullscreenUpdate`. Please migrate your code to use `onFullscreenUpdate` instead.\"\n      );\n    }\n\n    if (this.props.onIOSFullscreenUpdate) {\n      this.props.onIOSFullscreenUpdate(event.nativeEvent);\n    }\n\n    if (this.props.onFullscreenUpdate) {\n      this.props.onFullscreenUpdate(event.nativeEvent);\n    }\n  };\n\n  _renderPoster = () =>\n    this.props.usePoster && this.state.showPoster ? (\n      // @ts-ignore: the react-native type declarations are overly restrictive\n      <Image style={[_STYLES.poster, this.props.posterStyle]} source={this.props.posterSource!} />\n    ) : null;\n\n  render() {\n    const source = getNativeSourceFromSource(this.props.source) || undefined;\n\n    let nativeResizeMode = ExpoVideoManagerConstants.ScaleNone;\n    if (this.props.resizeMode) {\n      let resizeMode = this.props.resizeMode;\n      if (resizeMode === ResizeMode.STRETCH) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleToFill;\n      } else if (resizeMode === ResizeMode.CONTAIN) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleAspectFit;\n      } else if (resizeMode === ResizeMode.COVER) {\n        nativeResizeMode = ExpoVideoManagerConstants.ScaleAspectFill;\n      }\n    }\n\n    // Set status via individual props\n    const status: PlaybackStatusToSet = { ...this.props.status };\n    [\n      'progressUpdateIntervalMillis',\n      'positionMillis',\n      'shouldPlay',\n      'rate',\n      'shouldCorrectPitch',\n      'volume',\n      'isMuted',\n      'isLooping',\n    ].forEach(prop => {\n      if (prop in this.props) {\n        status[prop] = this.props[prop];\n      }\n    });\n\n    // Replace selected native props\n    // @ts-ignore: TypeScript thinks \"children\" is not in the list of props\n    const nativeProps: NativeProps = {\n      ...omit(this.props, 'source', 'onPlaybackStatusUpdate', 'usePoster', 'posterSource', ...Object.keys(status)),\n      style: StyleSheet.flatten([_STYLES.base, this.props.style]),\n      source,\n      resizeMode: nativeResizeMode,\n      status,\n      onStatusUpdate: this._nativeOnPlaybackStatusUpdate,\n      onLoadStart: this._nativeOnLoadStart,\n      onLoad: this._nativeOnLoad,\n      onError: this._nativeOnError,\n      onReadyForDisplay: this._nativeOnReadyForDisplay,\n      onFullscreenUpdate: this._nativeOnFullscreenUpdate,\n    };\n\n    return (\n      <View style={nativeProps.style} pointerEvents=\"box-none\">\n        <ExponentVideo ref={this._nativeRef} {...nativeProps} style={_STYLES.video} />\n        {this._renderPoster()}\n      </View>\n    );\n  }\n}\n\nObject.assign(Video.prototype, PlaybackMixin);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}